import"./modulepreload-polyfill-3cfb730f.js";let a;const l={player1:null,player2:null},f=document.getElementById("backgroundAudio"),d=document.getElementById("miscAudio");let n="player1",i=[],m=0,r;window.addEventListener("load",()=>{a=localStorage.getItem("Mode"),a===null&&(typeof window.electronAPI<"u"?window.electronAPI.navigateTo("index.html"):s("")),a==="Single Player"&&(document.getElementsByClassName("player")[1].style.display="none",document.getElementsByClassName("text")[1].style.display="none"),document.getElementsByClassName("body")[0].style.display="flex",f.play(),addEventListener("keydown",e=>{switch(e.keyCode){case 74:l.player1!=="Keyboard"&&l.player2!=="Keyboard"&&p("Keyboard");break;case 76:if(n==="player2"){let t="player1";l[t]==="Keyboard"?(n=t,l[t]=null,document.getElementsByClassName("controller")[0].style.opacity=0,d.currentTime=0,d.play()):typeof window.electronAPI<"u"?window.electronAPI.navigateTo("index.html"):s("")}else typeof window.electronAPI<"u"?window.electronAPI.navigateTo("index.html"):s("")}}),addEventListener("gamepadconnected",e=>{let t=e.gamepad.index;i.push(t)}),addEventListener("gamepaddisconnected",e=>{let t=e.gamepad.index;i=i.filter(o=>o!==t)}),u()});function u(){m++,i.forEach(e=>{navigator.getGamepads()[e].buttons.map(o=>o.pressed).forEach((o,c)=>{if(o)switch(c){case 1:l.player1!==e&&l.player2!==e&&(Math.abs(m-r)>10||r===void 0)&&p(e);break;case 2:if(n==="player2"&&(Math.abs(m-r)>10||r===void 0)){let y="player1";l[y]===e?(n=y,l[y]=null,document.getElementsByClassName("controller")[0].style.opacity=0):typeof window.electronAPI<"u"?window.electronAPI.navigateTo("index.html"):s("")}else typeof window.electronAPI<"u"?window.electronAPI.navigateTo("index.html"):s("")}})}),requestAnimationFrame(u)}function p(e){l[n]=e,d.currentTime=0,d.play(),n==="player1"?(document.getElementsByClassName("controller")[0].style.opacity=100,e==="Keyboard"?document.getElementsByClassName("controller")[0].setAttribute("src","../resources/Icons/wasd.png"):document.getElementsByClassName("controller")[0].setAttribute("src","../resources/Icons/controller.png")):n==="player2"&&(document.getElementsByClassName("controller")[1].style.opacity=100,e==="Keyboard"?document.getElementsByClassName("controller")[1].setAttribute("src","../resources/Icons/wasd.png"):document.getElementsByClassName("controller")[1].setAttribute("src","../resources/Icons/controller.png")),a==="Single Player"||a==="Multi Player"&&n==="player2"?(a==="Single Player"&&(l.player2="Computer"),localStorage.setItem("Controllers",JSON.stringify(l)),setTimeout(()=>{typeof window.electronAPI<"u"?window.electronAPI.navigateTo("SelectCharacter/index.html"):s("SelectCharacter")},500)):a==="Multi Player"&&n==="player1"&&(n="player2")}function s(e){const t=window.location.href,o=t.endsWith("/")?t.slice(0,-1):t,c=o.substring(0,o.lastIndexOf("/"));window.location.href=`${c}/${e}/`}
